import { useEffect, useState } from 'react';

type FacingDirection = 'north' | 'south' | 'east' | 'west';

interface PixelCharacterProps {
  direction: FacingDirection;
  isMoving: boolean;
  size: number; // Size of ONE tile
  userColor: string;
}

// Darken a color for shading
const darkenColor = (hex: string, amount: number = 0.3) => {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  if (!result) return hex;
  const r = Math.max(0, Math.floor(parseInt(result[1], 16) * (1 - amount)));
  const g = Math.max(0, Math.floor(parseInt(result[2], 16) * (1 - amount)));
  const b = Math.max(0, Math.floor(parseInt(result[3], 16) * (1 - amount)));
  return `rgb(${r},${g},${b})`;
};

const PixelCharacter = ({ direction, isMoving, size, userColor }: PixelCharacterProps) => {
  const [frame, setFrame] = useState(0);

  useEffect(() => {
    if (!isMoving) {
      setFrame(0);
      return;
    }

    const interval = setInterval(() => {
      setFrame(prev => (prev + 1) % 4);
    }, 120);

    return () => clearInterval(interval);
  }, [isMoving]);

  // Character spans 2 tiles tall
  const spriteWidth = 16;
  const spriteHeight = 32;
  
  // Calculate pixel size so character width = tile size
  const pixelSize = size / spriteWidth;
  const characterWidth = size;
  const characterHeight = size * 2;

  const shirtColor = userColor;
  const shirtShadow = darkenColor(userColor, 0.35);

  // Color palette
  const colors: Record<number, string> = {
    0: 'transparent',
    1: '#f8d8b0',    // skin
    2: '#d4a574',    // skin shadow
    3: '#5c3d2e',    // hair
    4: '#7a5540',    // hair highlight
    5: '#3d2517',    // hair shadow
    6: shirtColor,   // shirt
    7: shirtShadow,  // shirt shadow
    8: '#4a6fa5',    // pants
    9: '#364f73',    // pants shadow
    10: '#3d2517',   // shoes
    11: '#1a1a2e',   // eyes
    12: '#ffffff',   // eye whites
  };

  // 16x32 sprites - proper 1x2 tile proportions
  // Top 16 rows = upper body (extends above the tile)
  // Bottom 16 rows = lower body (on the tile player stands)
  const sprites: Record<FacingDirection, number[][][]> = {
    south: [
      // Frame 0 - standing
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,3,3,4,4,4,4,4,4,3,3,0,0,0],
        [0,0,0,3,4,4,4,4,4,4,4,4,3,0,0,0],
        [0,0,0,3,5,3,3,3,3,3,3,5,3,0,0,0],
        [0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],
        [0,0,1,1,12,11,1,1,1,12,11,1,1,0,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
        [0,0,0,1,1,1,2,1,1,2,1,1,1,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0],
        [0,0,1,6,6,6,6,6,6,6,6,6,6,1,0,0],
        [0,0,1,6,6,6,6,6,6,6,6,6,6,1,0,0],
        // Bottom half - on tile
        [0,0,0,6,7,7,6,6,6,6,7,7,6,0,0,0],
        [0,0,0,6,7,7,7,6,6,7,7,7,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,10,10,10,0,0,10,10,10,0,0,0,0],
        [0,0,0,0,10,10,10,0,0,10,10,10,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 1 - walk left leg forward
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,3,3,4,4,4,4,4,4,3,3,0,0,0],
        [0,0,0,3,4,4,4,4,4,4,4,4,3,0,0,0],
        [0,0,0,3,5,3,3,3,3,3,3,5,3,0,0,0],
        [0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],
        [0,0,1,1,12,11,1,1,1,12,11,1,1,0,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
        [0,0,0,1,1,1,2,1,1,2,1,1,1,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0],
        [0,0,1,6,6,6,6,6,6,6,6,6,6,1,0,0],
        [0,0,1,6,6,6,6,6,6,6,6,6,6,1,0,0],
        [0,0,0,6,7,7,6,6,6,6,7,7,6,0,0,0],
        [0,0,0,6,7,7,7,6,6,7,7,7,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,8,8,9,8,0,0,8,8,0,0,0,0,0],
        [0,0,0,8,9,9,0,0,0,0,8,8,0,0,0,0],
        [0,0,8,8,9,0,0,0,0,0,8,9,0,0,0,0],
        [0,0,8,9,0,0,0,0,0,0,0,8,8,0,0,0],
        [0,10,10,10,0,0,0,0,0,0,0,8,9,0,0,0],
        [0,10,10,0,0,0,0,0,0,0,0,10,10,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,10,10,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 2 - standing
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,3,3,4,4,4,4,4,4,3,3,0,0,0],
        [0,0,0,3,4,4,4,4,4,4,4,4,3,0,0,0],
        [0,0,0,3,5,3,3,3,3,3,3,5,3,0,0,0],
        [0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],
        [0,0,1,1,12,11,1,1,1,12,11,1,1,0,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
        [0,0,0,1,1,1,2,1,1,2,1,1,1,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0],
        [0,0,1,6,6,6,6,6,6,6,6,6,6,1,0,0],
        [0,0,1,6,6,6,6,6,6,6,6,6,6,1,0,0],
        [0,0,0,6,7,7,6,6,6,6,7,7,6,0,0,0],
        [0,0,0,6,7,7,7,6,6,7,7,7,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,10,10,10,0,0,10,10,10,0,0,0,0],
        [0,0,0,0,10,10,10,0,0,10,10,10,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 3 - walk right leg forward
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,3,3,4,4,4,4,4,4,3,3,0,0,0],
        [0,0,0,3,4,4,4,4,4,4,4,4,3,0,0,0],
        [0,0,0,3,5,3,3,3,3,3,3,5,3,0,0,0],
        [0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],
        [0,0,1,1,12,11,1,1,1,12,11,1,1,0,0,0],
        [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
        [0,0,0,1,1,1,2,1,1,2,1,1,1,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0],
        [0,0,1,6,6,6,6,6,6,6,6,6,6,1,0,0],
        [0,0,1,6,6,6,6,6,6,6,6,6,6,1,0,0],
        [0,0,0,6,7,7,6,6,6,6,7,7,6,0,0,0],
        [0,0,0,6,7,7,7,6,6,7,7,7,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,8,8,0,0,8,9,8,8,0,0,0],
        [0,0,0,0,8,8,0,0,0,0,9,9,8,0,0,0],
        [0,0,0,0,9,8,0,0,0,0,0,9,8,8,0,0],
        [0,0,0,8,8,0,0,0,0,0,0,0,9,8,0,0],
        [0,0,0,9,8,0,0,0,0,0,0,10,10,10,0,0],
        [0,0,0,10,10,0,0,0,0,0,0,0,10,10,0,0],
        [0,0,0,10,10,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
    ],
    north: [
      // Frame 0 - standing (back view)
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,3,5,5,5,5,5,5,3,0,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,1,1,5,5,5,5,5,5,1,1,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0],
        [0,0,1,6,6,7,7,6,6,7,7,6,6,1,0,0],
        [0,0,1,6,7,7,7,6,6,7,7,7,6,1,0,0],
        [0,0,0,6,7,7,7,6,6,7,7,7,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,10,10,10,0,0,10,10,10,0,0,0,0],
        [0,0,0,0,10,10,10,0,0,10,10,10,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 1
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,3,5,5,5,5,5,5,3,0,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,1,1,5,5,5,5,5,5,1,1,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0],
        [0,0,1,6,6,7,7,6,6,7,7,6,6,1,0,0],
        [0,0,1,6,7,7,7,6,6,7,7,7,6,1,0,0],
        [0,0,0,6,7,7,7,6,6,7,7,7,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,8,8,9,8,0,0,8,8,0,0,0,0,0],
        [0,0,0,8,9,9,0,0,0,0,8,8,0,0,0,0],
        [0,0,8,8,9,0,0,0,0,0,8,9,0,0,0,0],
        [0,0,8,9,0,0,0,0,0,0,0,8,8,0,0,0],
        [0,10,10,10,0,0,0,0,0,0,0,8,9,0,0,0],
        [0,10,10,0,0,0,0,0,0,0,0,10,10,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,10,10,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 2
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,3,5,5,5,5,5,5,3,0,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,1,1,5,5,5,5,5,5,1,1,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0],
        [0,0,1,6,6,7,7,6,6,7,7,6,6,1,0,0],
        [0,0,1,6,7,7,7,6,6,7,7,7,6,1,0,0],
        [0,0,0,6,7,7,7,6,6,7,7,7,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,8,9,8,0,0,8,9,8,0,0,0,0],
        [0,0,0,0,10,10,10,0,0,10,10,10,0,0,0,0],
        [0,0,0,0,10,10,10,0,0,10,10,10,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 3
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,3,5,5,5,5,5,5,3,0,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,3,5,5,5,5,5,5,5,5,3,0,0,0],
        [0,0,0,1,1,5,5,5,5,5,5,1,1,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,6,6,6,6,6,6,6,6,6,6,0,0,0],
        [0,0,1,6,6,7,7,6,6,7,7,6,6,1,0,0],
        [0,0,1,6,7,7,7,6,6,7,7,7,6,1,0,0],
        [0,0,0,6,7,7,7,6,6,7,7,7,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,6,6,7,7,6,6,7,7,6,6,0,0,0],
        [0,0,0,0,8,8,8,8,8,8,8,8,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,8,8,0,0,8,9,8,8,0,0,0],
        [0,0,0,0,8,8,0,0,0,0,9,9,8,0,0,0],
        [0,0,0,0,9,8,0,0,0,0,0,9,8,8,0,0],
        [0,0,0,8,8,0,0,0,0,0,0,0,9,8,0,0],
        [0,0,0,9,8,0,0,0,0,0,0,10,10,10,0,0],
        [0,0,0,10,10,0,0,0,0,0,0,0,10,10,0,0],
        [0,0,0,10,10,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
    ],
    east: [
      // Frame 0 - standing (right side)
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,4,4,3,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,5,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,1,1,1,12,11,1,1,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,1,1,1,2,1,0,0,0,0,0,0],
        [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,0,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,1,6,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,1,6,6,6,6,6,6,6,1,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,1,0,0,0,0],
        [0,0,0,0,6,7,7,6,6,7,6,0,0,0,0,0],
        [0,0,0,0,6,7,7,7,6,6,6,0,0,0,0,0],
        [0,0,0,0,0,6,7,7,6,6,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,10,10,10,10,10,0,0,0,0,0,0],
        [0,0,0,0,0,10,10,10,10,10,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 1
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,4,4,3,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,5,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,1,1,1,12,11,1,1,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,1,1,1,2,1,0,0,0,0,0,0],
        [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,0,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,1,6,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,1,6,6,6,6,6,6,6,1,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,1,0,0,0,0],
        [0,0,0,0,6,7,7,6,6,7,6,0,0,0,0,0],
        [0,0,0,0,6,7,7,7,6,6,6,0,0,0,0,0],
        [0,0,0,0,0,6,7,7,6,6,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,8,8,8,0,0,8,8,0,0,0,0,0],
        [0,0,0,8,9,8,0,0,0,0,8,8,0,0,0,0],
        [0,0,10,10,10,0,0,0,0,0,8,9,0,0,0,0],
        [0,0,10,10,0,0,0,0,0,0,0,8,8,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,8,9,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,10,10,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,10,10,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 2
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,4,4,3,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,5,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,1,1,1,12,11,1,1,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,1,1,1,2,1,0,0,0,0,0,0],
        [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,0,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,1,6,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,1,6,6,6,6,6,6,6,1,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,1,0,0,0,0],
        [0,0,0,0,6,7,7,6,6,7,6,0,0,0,0,0],
        [0,0,0,0,6,7,7,7,6,6,6,0,0,0,0,0],
        [0,0,0,0,0,6,7,7,6,6,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,9,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,10,10,10,10,10,0,0,0,0,0,0],
        [0,0,0,0,0,10,10,10,10,10,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 3
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,4,4,3,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,5,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,1,1,1,12,11,1,1,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,1,1,1,2,1,0,0,0,0,0,0],
        [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,0,0,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,1,6,6,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,1,6,6,6,6,6,6,6,1,0,0,0,0],
        [0,0,0,0,6,6,6,6,6,6,6,1,0,0,0,0],
        [0,0,0,0,6,7,7,6,6,7,6,0,0,0,0,0],
        [0,0,0,0,6,7,7,7,6,6,6,0,0,0,0,0],
        [0,0,0,0,0,6,7,7,6,6,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,0,0,8,8,0,0,0,0,0],
        [0,0,0,0,8,8,0,0,0,0,8,9,0,0,0,0],
        [0,0,0,0,9,8,0,0,0,0,10,10,0,0,0,0],
        [0,0,0,10,10,0,0,0,0,0,10,10,0,0,0,0],
        [0,0,0,10,10,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
    ],
    west: [
      // Frame 0 - standing (left side - mirrored)
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,4,4,3,3,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,5,3,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,11,12,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,0,1,2,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
        [0,0,0,0,0,0,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,6,1,0,0,0],
        [0,0,0,0,1,6,6,6,6,6,6,6,1,0,0,0],
        [0,0,0,0,1,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,0,0,6,7,6,6,7,7,6,0,0,0,0],
        [0,0,0,0,0,6,6,6,7,7,7,6,0,0,0,0],
        [0,0,0,0,0,0,6,6,7,7,6,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,10,10,10,10,10,0,0,0,0,0],
        [0,0,0,0,0,0,10,10,10,10,10,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 1
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,4,4,3,3,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,5,3,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,11,12,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,0,1,2,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
        [0,0,0,0,0,0,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,6,1,0,0,0],
        [0,0,0,0,1,6,6,6,6,6,6,6,1,0,0,0],
        [0,0,0,0,1,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,0,0,6,7,6,6,7,7,6,0,0,0,0],
        [0,0,0,0,0,6,6,6,7,7,7,6,0,0,0,0],
        [0,0,0,0,0,0,6,6,7,7,6,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,0,0,8,8,0,0,0,0,0],
        [0,0,0,0,8,8,0,0,0,0,8,9,0,0,0,0],
        [0,0,0,0,9,8,0,0,0,0,10,10,0,0,0,0],
        [0,0,0,8,8,0,0,0,0,0,0,10,10,0,0,0],
        [0,0,0,9,8,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,10,10,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,10,10,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 2
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,4,4,3,3,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,5,3,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,11,12,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,0,1,2,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
        [0,0,0,0,0,0,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,6,1,0,0,0],
        [0,0,0,0,1,6,6,6,6,6,6,6,1,0,0,0],
        [0,0,0,0,1,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,0,0,6,7,6,6,7,7,6,0,0,0,0],
        [0,0,0,0,0,6,6,6,7,7,7,6,0,0,0,0],
        [0,0,0,0,0,0,6,6,7,7,6,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,9,8,0,0,0,0,0],
        [0,0,0,0,0,0,10,10,10,10,10,0,0,0,0,0],
        [0,0,0,0,0,0,10,10,10,10,10,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
      // Frame 3
      [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,3,4,4,3,3,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,5,3,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,11,12,1,1,1,0,0,0,0],
        [0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0],
        [0,0,0,0,0,0,1,2,1,1,1,0,0,0,0,0],
        [0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
        [0,0,0,0,0,0,6,6,6,6,6,0,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,0,0,6,6,6,6,6,6,6,1,0,0,0],
        [0,0,0,0,1,6,6,6,6,6,6,6,1,0,0,0],
        [0,0,0,0,1,6,6,6,6,6,6,6,0,0,0,0],
        [0,0,0,0,0,6,7,6,6,7,7,6,0,0,0,0],
        [0,0,0,0,0,6,6,6,7,7,7,6,0,0,0,0],
        [0,0,0,0,0,0,6,6,7,7,6,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0],
        [0,0,0,0,0,0,8,8,8,8,0,0,0,0,0,0],
        [0,0,0,0,0,8,8,0,0,8,8,0,0,0,0,0],
        [0,0,0,0,8,9,0,0,0,0,8,8,0,0,0,0],
        [0,0,0,0,10,10,0,0,0,0,8,9,0,0,0,0],
        [0,0,0,10,10,0,0,0,0,0,0,8,8,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,8,9,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,10,10,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,10,10,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      ],
    ],
  };

  const currentSprite = sprites[direction][frame];

  return (
    <div 
      className="drop-shadow-lg pointer-events-none"
      style={{ 
        width: characterWidth,
        height: characterHeight,
      }}
    >
      <svg 
        width={characterWidth} 
        height={characterHeight}
        viewBox={`0 0 ${spriteWidth} ${spriteHeight}`}
        style={{ imageRendering: 'pixelated' }}
        preserveAspectRatio="none"
      >
        {currentSprite.map((row, y) =>
          row.map((pixel, x) => (
            pixel !== 0 && (
              <rect
                key={`${x}-${y}`}
                x={x}
                y={y}
                width={1}
                height={1}
                fill={colors[pixel]}
              />
            )
          ))
        )}
      </svg>
    </div>
  );
};

export default PixelCharacter;